<!-- 
Köp Basgançakly Ýazylmak Formy (Wizard) + Ösüş Çyzgysy (Progress Bar)

3 ädim:
1. Hasap Maglumatlary
2. Şahsy Maglumatlar
3. Islegler

- Ädimleriň arasynda “Indiki / Yza” düwmeleri bilen geçilýär.
- Ösüş derejesi Bootstrap progress bar arkaly görkezilýär.
- Her ädimdäki maglumat sessionStorage-da saklanýar.
- Form tamamlanyňda ähli maglumat localStorage-daky registeredUsers sanawyna goşulýar.

Html Kody Berildi!
-->






<!DOCTYPE html>
<html lang="tk">
<head>
    <meta charset="UTF-8"/>
    <title>Köp Basganly Ýazylmak Formy</title>
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #0d6efd 0%, #6610f2 100%);
            min-height: 100vh;
        }
        .card {
            border-radius: 1.5rem;
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }
        .step { display: none; }
        .step.active { display: block; }
        .step-indicator .circle {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: 2px solid #0d6efd;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            background-color: #fff;
        }
        .step-indicator .active-step .circle {
            background-color: #0d6efd;
            color: #fff;
        }
        .step-indicator .label {
            font-size: 0.85rem;
            margin-top: 0.25rem;
        }
    </style>
</head>
<body class="d-flex align-items-center justify-content-center">

<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-7">
            <div class="card p-4 p-md-5 bg-white">
                <h3 class="mb-3 text-center">Agza bol</h3>
                <p class="text-muted text-center mb-4">
                    Ädimme-ädim formy doldur, maglumatlaryň awtomatik ýagdaýda saklansyn.
                </p>

                <!-- Ädim görkezijisi -->
                <div class="step-indicator d-flex justify-content-between mb-4">
                    <div class="text-center step-indicator-item active-step" data-step="0">
                        <div class="circle">1</div>
                        <div class="label">Hasap</div>
                    </div>
                    <div class="text-center step-indicator-item" data-step="1">
                        <div class="circle">2</div>
                        <div class="label">Şahsy</div>
                    </div>
                    <div class="text-center step-indicator-item" data-step="2">
                        <div class="circle">3</div>
                        <div class="label">Islegler</div>
                    </div>
                </div>

                <!-- Progress Bar -->
                <div class="progress mb-4" style="height: 10px;">
                    <div class="progress-bar" role="progressbar" style="width: 33%;"></div>
                </div>

                <!-- Form -->
                <form id="registerForm" novalidate>
                    <!-- STEP 1 -->
                    <div class="step active" data-step="0">
                        <h5 class="mb-3">Hasap Maglumatlary</h5>
                        <div class="mb-3">
                            <label class="form-label">E-poçta</label>
                            <input type="email" class="form-control" name="email" required placeholder="mysal@mail.com">
                            <div class="form-text">Bu poçta bilen giriler.</div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Ulanyjy ady</label>
                            <input type="text" class="form-control" name="username" required placeholder="guvanch_01">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Parol</label>
                            <input type="password" class="form-control" name="password" required minlength="6">
                            <div class="form-text">Iň az 6 harp bolmaly.</div>
                        </div>
                    </div>

                    <!-- STEP 2 -->
                    <div class="step" data-step="1">
                        <h5 class="mb-3">Şahsy Maglumatlar</h5>
                        <div class="mb-3">
                            <label class="form-label">Adyňyz</label>
                            <input type="text" class="form-control" name="firstName" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Familiýaňyz</label>
                            <input type="text" class="form-control" name="lastName" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Doglan senäňiz</label>
                            <input type="date" class="form-control" name="birthDate" required>
                        </div>
                    </div>

                    <!-- STEP 3 -->
                    <div class="step" data-step="2">
                        <h5 class="mb-3">Islegler</h5>
                        <div class="mb-3">
                            <label class="form-label">Gyzyklanýan ugurlaryňyz</label>
                            <select class="form-select" name="interest" required>
                                <option value="">Saýlaň...</option>
                                <option>Web Düzmek</option>
                                <option>Mobil Düzmek</option>
                                <option>Maglumat Ylymy</option>
                                <option>Kiber Howpsuzlyk</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Täzelikler habary</label>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="newsletter" id="newsletter">
                                <label class="form-check-label" for="newsletter">
                                    Hepdelik täzelikler habaryny almak isleýärin
                                </label>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Özüňiz barada gysgaça</label>
                            <textarea class="form-control" name="about" rows="3" placeholder="Özüňiz barada gysgaça ýaz..."></textarea>
                        </div>
                    </div>
                    <div class="d-flex justify-content-between mt-4">
                        <button type="button" id="prevBtn" class="btn btn-outline-secondary" disabled>Yza</button>
                        <button type="button" id="nextBtn" class="btn btn-primary">Indiki</button>
                        <button type="submit" id="submitBtn" class="btn btn-success d-none">Ýazylmagy Tamamla</button>
                    </div>
                </form>

                <!-- Netije -->
                <div id="resultBox" class="alert alert-success mt-4 d-none"></div>
            </div>
        </div>
    </div>
</div>

 <script>
    const form = document.getElementById("registerForm");
    const steps = document.querySelectorAll(".step");
    const indicators = document.querySelectorAll(".step-indicator-item");
    const progressBar = document.querySelector(".progress-bar");

    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");
    const submitBtn = document.getElementById("submitBtn");
    const resultboxt = document.getElementById("resultBox");
    let currenStep = 0;

    window.addEventListener("DOMContentLoaded", ()=>{
        const inputs = foem.querySelectorAll("input, select, textarea");
        inputs.forEach(input => {
            const savad = localStorage.getItem("register_" + input.name);
            if (savad !=null){
                if (input.type==="chekbox"){
                    input.type = savad==="true";
                }else{
                    input.value= savad;
                }

            }
            
        });
        updateUi();
    });
    function updateUI(){
        steps.forEach((step, index)=>{
            step.classList.toggle("active", index === currenStep);
        });
        stepIndicators.forEach((indicator, index)=>{
            indicator.classList.toggle("active-step", index===currenStep);
        });
        const precentage = ((currenStep +1) / step.length) *100;
        progressBar.style.width=precentage + "%";
        prevBtn.disabled = currenStep === 0;
        nextBtn.classList.toggle("d-none", currenSteps===steps.length -1);
        submitBtn.classList.toggle("d-none", currenSteps!==steps.length -1);

    };
    function saveCurrentStepToSession(){
        const avtiveStep= steps[currenSteps];
        const inputs = activeStep.querySelectorAll("input, select, textarea");

        inputs.forEach(input=>{
           let value= input.type=="chekbox" ? input.checked : input.value;
           sessionStorage.setItem("register_" + input.name, value);

        });
    }
    function validateCurrenStep(){
        const activeStep= steps[currenSteps];
        const inputs =activeStep.querySelectorAll("[required]");
        let valid = true;

        inputs.forEach(input=>{
            if(!input.value){
                input.classList.add("is-invalid");
                valid = false;
            }else{input.classList.remove("is-invalid");

            }
        });
        if(!valid){
            aler("Bu adimi doldurun!!!");
        }
        return valid;
    }
    nextBtn.addEventListener("click", ()=>{
        if(!validateCurrentStep())return;
        saveCurrentStepToSession();
        if(currentSteps < step.length -1){
            currentSteps ++;
            updateUI();
        }
    })

    prevBtn.addEventListener("click", ()=>{
        if(currentSteps > 0){
            currentSteps --;
            updateUI();
        }
    });

    
 </script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
